<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>메시지 보내기</title>
  <style>
    html,body{height:100%;margin:0;font-family: 'Noto Sans KR', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial}
    body{
      display:flex;align-items:center;justify-content:center;
      background: linear-gradient(135deg,#f6f8ff 0%, #e8f0ff 50%, #f2f7f2 100%);
    }

    .card{
      width:min(520px,92%);
      background:rgba(255,255,255,0.9);
      border-radius:12px;
      box-shadow:0 8px 30px rgba(20,30,60,0.12);
      padding:28px;
      text-align:center;
    }

    h1{
      margin:0 0 18px 0;
      font-size:1.7rem;
      font-weight:700;
      color:#213547;
      letter-spacing:-0.02em;
    }

    .field{
      width:100%;
      box-sizing:border-box;
      padding:12px 14px;
      margin:10px 0;
      border-radius:10px;
      border:1px solid rgba(33,53,71,0.08);
      font-size:1rem;
      outline:none;
      transition:box-shadow .18s, border-color .18s, transform .06s;
      background:#fbfdff;
      font-family: 'Noto Sans KR', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    .field:focus{box-shadow:0 6px 18px rgba(33,53,71,0.06); border-color:rgba(33,53,71,0.16);}

    textarea.field{min-height:120px;resize:vertical}

    .color-picker {
      margin:12px 0;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      font-size:0.95rem;
      color:#213547;
    }

    .btn{
      width:100%;
      padding:12px 16px;
      margin-top:12px;
      border-radius:10px;
      border:0;
      font-size:1rem;
      font-weight:700;
      cursor:pointer;
      box-shadow:0 6px 18px rgba(34,56,90,0.08);
      transition:transform .08s, opacity .12s;
    }
    .btn:active{transform:translateY(1px)}

    .btn.enabled{ background: linear-gradient(90deg,#4f9aff,#3ca0ff); color:#fff; }
    .btn.disabled{ background:#dbe9ff; color:#8aa6d6; cursor:not-allowed; }

    .footer-note {
      margin-top:8px;
      font-size:0.85rem;
      color: #7a7a7a;
      font-family: 'Noto Sans KR', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }

    .credit {
      position: fixed;
      right: 12px;
      bottom: 8px;
      font-size: 0.85rem;
      color: #7a7a7a;
      font-family: 'Noto Sans KR', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }

    @media (max-width:420px){ h1{font-size:1.4rem} }
  </style>
</head>
<body>
  <main class="card" role="main" aria-labelledby="title">
    <h1 id="title">메시지 보내기</h1>

    <input id="nameInput" class="field" type="text" placeholder="이름이 무엇인가요?" aria-label="이름" />

    <textarea id="messageInput" class="field" placeholder="보낼 메시지 입력하기" aria-label="메시지"></textarea>

    <div class="color-picker">
      <label for="colorInput">색상 선택:</label>
      <input type="color" id="colorInput" value="#58b9ff">
    </div>

    <button id="sendBtn" class="btn disabled" type="button" onclick="message()" disabled>보내기</button>

    <div class="footer-note">메시지는 주인장만 볼 수 있습니다!</div>
  </main>

  <div class="credit">@kim.changseop_(Powered by ChatGPT)</div>

  <script>
    const nameInput = document.getElementById('nameInput');
    const messageInput = document.getElementById('messageInput');
    const sendBtn = document.getElementById('sendBtn');
    const colorInput = document.getElementById('colorInput');

    function updateButtonState(){
      const nameVal = nameInput.value.trim();
      const msgVal = messageInput.value.trim();
      const ok = nameVal.length > 0 && msgVal.length > 0;

      if(ok){
        sendBtn.disabled = false;
        sendBtn.classList.remove('disabled');
        sendBtn.classList.add('enabled');
      } else {
        sendBtn.disabled = true;
        sendBtn.classList.remove('enabled');
        sendBtn.classList.add('disabled');
      }
    }

    nameInput.addEventListener('input', updateButtonState);
    messageInput.addEventListener('input', updateButtonState);

    function getCurrentTimeText() {
      const now = new Date();
      const year = now.getFullYear();
      const month = String(now.getMonth()+1).padStart(2,'0');
      const date = String(now.getDate()).padStart(2,'0');
      const hours = String(now.getHours()).padStart(2,'0');
      const minutes = String(now.getMinutes()).padStart(2,'0');
      const seconds = String(now.getSeconds()).padStart(2,'0');
      return `${year}/${month}/${date} ${hours}:${minutes}:${seconds}`;
    }

    function message(){
      if(sendBtn.disabled) return;

      const nameVal = nameInput.value.trim();
      const msgVal = messageInput.value.trim();
      const colorHex = colorInput.value.replace('#','');
      const colorDec = parseInt(colorHex,16);
      const timeText = getCurrentTimeText();

      const params = {
        content: null,
        embeds: [
          {
            title: nameVal,
            description: msgVal,
            color: colorDec,
            footer: { text: timeText }
          }
        ],
        attachments: []
      };

      const webhookUrl = "https://discord.com/api/webhooks/1434443222544945202/CgkYCdak0P8IEWhDkyURfMCBM6ym0DuxS0cbkhA2FNTX-t5lQaAKLEdKk0NDCXW3Eece";
      const request = new XMLHttpRequest();
      request.open("POST", webhookUrl);
      request.setRequestHeader("Content-type", "application/json");

      request.onreadystatechange = function() {
        if (request.readyState === 4) {
          if (request.status === 204) {
            console.log("메시지 보내기 성공!");
          } else {
            console.error("전송 중 에러 발생 : ", request.status, request.responseText);
          }
        }
      };

      request.send(JSON.stringify(params));

      alert("메시지 전송됨!");
      nameInput.value = '';
      messageInput.value = '';
      updateButtonState();
    }

    updateButtonState();
  </script>
</body>
</html>